import{x as e,D as t,aD as a,G as i,aE as l,aF as s,o as n,a as o,w as r,k as d,F as g,l as u,d as p,b as m,aG as f,g as c,y as h,aH as A,C,f as y,r as E,aI as x,m as I}from"./index-4432f848.js";import{_ as v,a as Q,b as k}from"./uni-forms.5dd59440.js";import{r as B}from"./uni-app.es.b4ee8af9.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";import{g as F}from"./index.7f27cc99.js";const R=b({name:"bgyxedit",props:{taskinfodtv:{type:Array,default:()=>[{type:"text",value:"",f:!1}]},mtype:{type:Array,default:()=>["text","img","video"]},uploadurl:{type:String,default:""},showdone:{type:Boolean,default:!1},filename:{type:String,default:"uploadfile"}},data:()=>({htmlinfo:""}),methods:{returnthisinfo:function(){console.log(this.taskinfodtv),this.$emit("bgyxchange",this.returninfo())},returninfo:function(){var e=this.taskinfodtv,t="";for(var a in e){var i=e[a];i.value&&("text"==i.type&&(t=t+'<p style="margin:5px auto;">'+i.value+"</p>"),"img"==i.type&&(t=t+'<p style="text-align:center;margin:5px auto;"><img style="width:300px;margin:auto;" src="'+i.value+'"></p>'),"video"==i.type&&(t=t+'<p style="text-align:center;margin:5px auto;"><video controls="controls" style="width:300px;margin:auto;" src="'+i.value+'"></video></p>'))}return t?{html:t='<p style="text-align:center;margin:5px auto;">'+t+"</p>",data:e}:{html:"",data:e}},addvuetype:function(s){var n=this;0==s&&this.taskinfodtv.push({type:"text",value:"",f:!0}),1==s&&e({count:1,success:e=>{const l=e.tempFilePaths;t({title:"上传中..."}),a({url:n.uploadurl,filePath:l[0],name:"img",success:e=>{console.log(e.data);var t=e.data;n.taskinfodtv.push({type:"img",value:t}),n.$emit("bgyxchange",n.returninfo()),i()}})}}),2==s&&l({count:1,sourceType:["camera","album"],success:function(e){var l=e.tempFilePath;t({title:"上传中..."}),a({url:n.uploadurl,filePath:l,name:"video",success:e=>{console.log(e.data);var t=e.data;n.taskinfodtv.push({type:"video",value:t}),n.$emit("bgyxchange",n.returninfo()),i()}})}})},delthisel:function(e){var t=this,a=this.taskinfodtv;s({itemList:["↑上移↑","↓下移↓","删除"],success:function(i){var l=i.tapIndex;if(console.log(l),0==l&&e>0){var s=a[e];for(var n in a[e]=a[e-1],a[e-1]=s,t.taskinfodtv=[],a)t.taskinfodtv.push(a[n]);t.$emit("bgyxchange",t.returninfo()),console.log(t.taskinfodtv)}if(1==l&&e<a.length-1){s=a[e];for(var n in a[e]=a[e+1],a[e+1]=s,t.taskinfodtv=[],a)t.taskinfodtv.push(a[n]);t.$emit("bgyxchange",t.returninfo()),console.log(t.taskinfodtv)}2==l&&(t.taskinfodtv.splice(e,1),t.$emit("bgyxchange",t.returninfo()),console.log(t.taskinfodtv))},fail:function(e){console.log(e.errMsg)}})}}},[["render",function(e,t,a,i,l,s){const C=f,y=c,E=h,x=A;return n(),o(y,{style:{"align-items":"center",width:"710rpx",display:"flex","flex-direction":"column","border-radius":"8rpx",border:"1rpx solid #d8d8d8",padding:"12rpx"}},{default:r((()=>[(n(!0),d(g,null,u(a.taskinfodtv,((e,i)=>(n(),o(y,{style:{width:"100%"}},{default:r((()=>["text"==e.type?(n(),o(y,{key:0,onLongpress:e=>s.delthisel(i),style:{width:"100%"}},{default:r((()=>[p(C,{onConfirm:t[0]||(t[0]=e=>s.returnthisinfo()),onInput:t[1]||(t[1]=e=>s.returnthisinfo()),onBlur:t[2]||(t[2]=e=>s.returnthisinfo()),style:{width:"100%",padding:"8rpx"},"auto-height":"",placeholder:"请输入...",focus:e.f,clearable:!1,modelValue:a.taskinfodtv[i].value,"onUpdate:modelValue":e=>a.taskinfodtv[i].value=e},null,8,["focus","modelValue","onUpdate:modelValue"])])),_:2},1032,["onLongpress"])):m("",!0),"img"==e.type?(n(),o(y,{key:1,style:{width:"100%"}},{default:r((()=>[p(E,{onLongpress:e=>s.delthisel(i),src:a.taskinfodtv[i].value,style:{width:"680rpx",margin:"auto"},mode:"widthFix"},null,8,["onLongpress","src"])])),_:2},1024)):m("",!0),"video"==e.type?(n(),o(y,{key:2,style:{width:"100%"}},{default:r((()=>[p(x,{onLongpress:e=>s.delthisel(i),src:"/qimokao/static/55.mp4",style:{width:"680rpx",margin:"auto"},controls:""},null,8,["onLongpress"])])),_:2},1024)):m("",!0)])),_:2},1024)))),256)),p(y,{style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"100rpx"}},{default:r((()=>[p(y,{style:{margin:"8rpx 24rpx 0rpx 10rpx"}},{default:r((()=>[a.showdone?(n(),o(E,{key:0,onClick:t[3]||(t[3]=e=>s.returnthisinfo()),src:"/qimokao/assets/done-54fb8789.png",style:{width:"50rpx",height:"50rpx"},mode:"widthFix"})):m("",!0)])),_:1}),p(y,{style:{display:"flex","align-items":"center"}},{default:r((()=>[p(y,{style:{margin:"8rpx 24rpx 0rpx 3rpx"}},{default:r((()=>[p(E,{onClick:t[4]||(t[4]=e=>s.addvuetype(0)),src:"data:image/png;base64,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",style:{width:"42rpx",height:"42rpx"},mode:"widthFix"})])),_:1}),p(y,{style:{margin:"8rpx 24rpx 0rpx 3rpx"}},{default:r((()=>[p(E,{onClick:t[5]||(t[5]=e=>s.addvuetype(1)),src:"/qimokao/assets/tupian-86b2fca2.png",style:{width:"50rpx",height:"50rpx"},mode:"widthFix"})])),_:1}),p(y,{style:{margin:"8rpx 6rpx 0rpx 3rpx"}},{default:r((()=>[p(E,{onClick:t[6]||(t[6]=e=>s.addvuetype(2)),src:"/qimokao/assets/shipin-0dde8b4c.png",style:{width:"50rpx",height:"50rpx"},mode:"widthFix"})])),_:1})])),_:1})])),_:1})])),_:1})}]]);const w=b({data:()=>({article:{id:0,articleCatId:0,title:"",content:"",status:0,userinfoId:0},articleCats:[{id:0,catName:""}],index:0,rules:[]}),onLoad(){this.getAllArticleCats()},methods:{change(e){},getAllArticleCats(){const e=this;(e=>F(e))("articleCat/getArticleCatsByField?fields=cat_name,id").then((t=>{t.success?e.articleCats=t.data.data:C({title:"res.msg"})}))},bindArticleCatChange(e){let t=e.detail.value;this.index=t,console.log(e)},getbgyxinfo(e){console.log(e.html)}}},[["render",function(e,t,a,i,l,s){const d=B(E("uni-easyinput"),v),g=x,u=B(E("uni-forms-item"),Q),m=B(E("bgyxedit"),R),f=B(E("uni-forms"),k),h=I,A=c;return n(),o(A,null,{default:r((()=>[p(f,{ref:"articleForm",rules:l.rules,modelValue:l.article},{default:r((()=>[p(u,{required:"",name:"articleCatId"},{default:r((()=>[p(g,{onChange:s.bindArticleCatChange,mode:"selector",value:l.index,range:l.articleCats,"range-key":"catName"},{default:r((()=>[p(d,{modelValue:l.articleCats[l.index].catName,"onUpdate:modelValue":t[0]||(t[0]=e=>l.articleCats[l.index].catName=e)},null,8,["modelValue"])])),_:1},8,["onChange","value","range"])])),_:1}),p(u,{required:"",name:"title"},{default:r((()=>[p(d,{modelValue:l.article.title,"onUpdate:modelValue":t[1]||(t[1]=e=>l.article.title=e),placeholder:"请输入文章标题"},null,8,["modelValue"])])),_:1}),p(u,{required:"",name:"content"},{default:r((()=>[p(m,{onBgyxchange:s.getbgyxinfo,showdone:!1,uploadurl:"#",filename:"img"},null,8,["onBgyxchange"])])),_:1})])),_:1},8,["rules","modelValue"]),p(h,{type:"primary",onClick:t[2]||(t[2]=t=>e.submit("articleForm"))},{default:r((()=>[y("提交")])),_:1})])),_:1})}],["__scopeId","data-v-0b56ed65"]]);export{w as default};
